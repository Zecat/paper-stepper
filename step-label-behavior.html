<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-item/paper-item-behavior.html">
<link rel="import" href="../paper-behaviors/paper-ripple-behavior.html">

<script>

window.Stepper = window.Stepper || {};

  /*
  * @polymerBehavior Stepper.StepLabelBehavior
  */
  Stepper.StepLabelBehaviorImpl = {

    properties: {
      icon: {
        type: String,
        computed: '_computeIcon(saved, editable)'
      },
      opened: {
        type: Boolean,
        reflectToAttribute: true,
        notify: true
      },
      selectable: {
        type: Boolean,
        reflectToAttribute: true
      },
      editable: {
        type: Boolean,
        reflectToAttribute: true
      },
      label: {
        type: String
      },
      optional: {
        type: Boolean
      },
      saved: {
        type: Boolean,
        reflectToAttribute: true
      },
      index: {
        type: Number
      },
      disabled: {
        type: Boolean,
        reflectToAttribute: true
      },
      step: {
        type: HTMLElement
      },
    },

    observers: [
      '_focusedChanged(focused)'
    ],

    _focusedChanged: function() {
      if (this.receivedFocusFromKeyboard) {
        // generate a ripple effect from the center of the badge
        var badge = this.$.badge;
        var badgePos = badge.getBoundingClientRect();
        var rippleX = badgePos.left + 12;
        var rippleY = badgePos.top + 12;
        this._ripple.uiDownAction({detail: {x: rippleX, y: rippleY}});
      }
      if (this.hasRipple()) {
        this._ripple.holdDown = this.receivedFocusFromKeyboard;
      }
    },

    _computeIcon: function(saved, editable) {
      return saved ? ( editable ? 'editor:mode-edit' : 'done' ) : '';
    },

    _computeIsIconBadge: function(icon) {
      return icon.length > 0;
    },

  };

    /** @polymerBehavior */
  Stepper.StepLabelBehavior = [
    Polymer.PaperItemBehavior,
    Polymer.PaperRippleBehavior,
    Stepper.StepLabelBehaviorImpl
  ];
</script>
